<?xml version="1.0" encoding="utf-8"?>
<launch>
     <!-- <node name="rviz" pkg="rviz" type="rviz" output="screen"
           args="-d $(find poly_planner)/config/rviz_config.rviz"> 
    </node> -->
    <node pkg="poly_planner" type="poly_planner_node" name="poly_planner" output="screen">
        <!-- node parameters -->
        <rosparam file="$(find poly_planner)/config/poly_planner_params_simp.yaml" command="load" />
    </node>

     
  <group ns="drone_0">
  <node pkg="nodelet" type="nodelet" name="manager" args="manager" output="screen"/>

  <node pkg="nodelet" type="nodelet" name="so3_quadrotor"
    args="load so3_quadrotor/Nodelet manager" output="screen">
  <!-- <node pkg="nodelet" type="nodelet" name="so3_quadrotor"
    args="standalone so3_quadrotor/Nodelet" output="screen"> -->
    <param name="init_x" value="0.0"/>
    <param name="init_y" value="0.0"/>
    <param name="init_z" value="1.0"/>

    <rosparam file="$(find uav_simulator)/config/so3_quadrotor.yaml"/>
    <remap from="~odom" to="odom"/>
    <remap from="~imu"  to="imu" />
    <remap from="~so3cmd" to="so3cmd"/>
    <remap from="~vis" to="vis"/>
    <remap from="~odom_payload" to="odom_payload"/>
    <remap from="~imu_payload"  to="imu_payload" />
    <remap from="~imu_cable"  to="imu_cable" />
    <remap from="~rpm" to="rpm" />
  </node>

    <node pkg="payload_mpc_controller" type="mpc_controller_node" name="mpc_controller_node" output="screen">
      <rosparam command="load" file="$(find payload_mpc_controller)/config/mpc_sim.yaml" />
      <rosparam command="load" file="$(find payload_mpc_controller)/config/model.yaml" />
      <remap from="~odom" to="odom"/>
      <remap from="~cmd" to="/position_cmd"/>
      <remap from="/mavros/imu/data" to="imu"/>
      <remap from="~payload_imu/data" to="imu_payload"/>
      <remap from="~payload_odom" to="odom_payload"/>
		  <remap from="~traj" to="/trajectory_generator_node/trajectory"/>
      <remap from="/mavros/setpoint_raw/attitude" to="so3cmd"/>
      <remap from="~cable_imu/raw_data" to="imu_cable"/>
      <remap from="/mavros/esc_status" to="rpm" />
      <remap from="~start_trigger" to="/move_base_simple/goal"/>
      <remap from="~cmd_trigger" to="/hummingbird/goal"/>
    </node>
  </group>
</launch>
