%YAML:1.0

#common parameters
#support: 1 imu 1 cam; 1 imu 2 cam: 2 cam; 
imu: 1         
num_of_cam: 2  

imu_topic: "/airsim_node/drone_1/imu/imu"
image0_topic: "/airsim_node/drone_1/front_left/Scene"
image1_topic: "/airsim_node/drone_1/front_right/Scene"
output_path: "/home/masgzh/output/"

cam0_calib: "left.yaml"
cam1_calib: "right.yaml"
image_width: 640
image_height: 480
   

# Extrinsic parameter between IMU and Camera.
estimate_extrinsic: 1   # 0  Have an accurate extrinsic parameters. We will trust the following imu^R_cam, imu^T_cam, don't change it.
                        # 1  Have an initial guess about extrinsic parameters. We will optimize around your initial guess.

# body_T_cam0: !!opencv-matrix
#    rows: 4
#    cols: 4
#    dt: d
#    data: [ -8.3913526314733922e-03, -8.3515760150194573e-03,
#        9.9992991573363776e-01, 1.7657491031057126e-02,
#        -9.9993187273546269e-01, -8.0438039741153045e-03,
#        -8.4585522033381877e-03, 4.5020745163533776e-03,
#        8.1138824717180702e-03, -9.9993277193803953e-01,
#        -8.2835086493457943e-03, -2.1058547210626732e-02, 0., 0., 0., 1. ]
# body_T_cam1: !!opencv-matrix
#    rows: 4
#    cols: 4
#    dt: d
#    data: [ -7.7548692478344172e-03, -8.6108119888890222e-03,
#        9.9993285570574231e-01, 1.7525876226546434e-02,
#        -9.9993578506501479e-01, -8.1968068505449132e-03,
#        -7.8254778682976811e-03, -4.4923818765750634e-02,
#        8.2636402003808396e-03, -9.9992933064009415e-01,
#        -8.5466938807812198e-03, -2.0365341716437092e-02, 0., 0., 0., 1. ]


# body_T_cam0: !!opencv-matrix
#    rows: 4
#    cols: 4
#    dt: d
#    data: [ 9.9993244663430148e-01, 1.1603682173107779e-02,
#        -6.7581651742664600e-04, -3.4273708912785764e-02,
#        -1.1612476108499407e-02, 9.9982124476117840e-01,
#        -1.4920754767680804e-02, 9.8854227577892565e-05,
#        5.0256001557662320e-04, 1.4927594723639833e-02,
#        9.9988845095300383e-01, 1.6121689081252655e-02, 0., 0., 0., 1. ]
# body_T_cam1: !!opencv-matrix
#    rows: 4
#    cols: 4
#    dt: d
#    data: [ 9.9991371745359092e-01, 1.2123074103598093e-02,
#        -5.0585296696679643e-03, 6.0984413409797315e-02,
#        -1.2199163271829679e-02, 9.9980864513533074e-01,
#        -1.5292270208228660e-02, -7.2112218007819068e-04,
#        4.8721723704609980e-03, 1.5352660581570393e-02,
#        9.9987027045985299e-01, 1.6204244189295676e-02, 0., 0., 0., 1. ]

# body_T_cam0: !!opencv-matrix
#    rows: 4
#    cols: 4
#    dt: d
#    data: [ -1.0, 0.0, 0.0 , 0.0475,
#             0.0, 0.0, 1.0 , 0.26,
#             0.0, 1.0, 0.0 , 0.0,
#             0., 0., 0., 1. ]
# body_T_cam1: !!opencv-matrix
#    rows: 4
#    cols: 4
#    dt: d
#    data: [ -1.0, 0.0, 0.0 , -0.0475,
#             0.0, 0.0, 1.0 , 0.26,
#             0.0, 1.0, 0.0 , 0.0,
#             0., 0., 0., 1. ]

body_T_cam0: !!opencv-matrix
   rows: 4
   cols: 4
   dt: d
   data: [  0.0, 0.0, 1.0 , 0.26,
            -1.0, 0.0, 0.0 , 0.0475,
            0.0, -1.0, 0.0 , 0.0,
            0., 0., 0., 1. ]
body_T_cam1: !!opencv-matrix
   rows: 4
   cols: 4
   dt: d
   data: [  0.0, 0.0, 1.0 , 0.26,
            -1.0, 0.0, 0.0 , -0.0475,
            0.0, -1.0, 0.0 , 0.0,
            0., 0., 0., 1. ]

#Multiple thread support
multiple_thread: 1

#feature traker paprameters
max_cnt: 150            # max feature number in feature tracking
min_dist: 20             # min distance between two features 
freq: 20                # frequence (Hz) of publish tracking result. At least 10Hz for good estimation. If set 0, the frequence will be same as raw image 
F_threshold: 1.0        # ransac threshold (pixel)
show_track: 1           # publish tracking image as topic
flow_back: 1            # perform forward and backward optical flow to improve feature tracking accuracy

#optimization parameters
max_solver_time: 0.05  # max solver itration time (ms), to guarantee real time
max_num_iterations: 10   # max solver itrations, to guarantee real time
keyframe_parallax: 10.0 # keyframe selection threshold (pixel)

#imu parameters       The more accurate parameters you provide, the better performance
acc_n: 0.2          # accelerometer measurement noise standard deviation. #0.2   0.04
gyr_n: 0.004         # gyroscope measurement noise standard deviation.     #0.05  0.004 0.0015
acc_w: 0.002         # accelerometer bias random work noise standard deviation.  #0.002 0.004
gyr_w: 4.0e-5      # gyroscope bias random work noise standard deviation.     #4.0e-5
g_norm: 9.80         # gravity magnitude

#unsynchronization parameters
estimate_td: 1                      # online estimate time offset between camera and imu
td: -0.001                            # initial value of time offset. unit: s. readed image clock + td = real image clock (IMU clock)

#loop closure parameters
load_previous_pose_graph: 0        # load and reuse previous pose graph; load from 'pose_graph_save_path'
pose_graph_save_path: "/home/dji/output/pose_graph/" # save and load path
save_image: 0                   # save image in pose graph for visualization prupose; you can close this function by setting 0 
